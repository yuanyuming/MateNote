---
tags:
cssclass:
source:
created: 2023-08-28 09:24
updated: 2023-09-11 16:37
---

## 3. System Model and Problem Formulation


Vehicular networks are a critical application scenario for mobile edge computing. Vehicles need to perform different computing tasks during driving, such as speech recognition, route planning, computer vision, machine learning, and augmented reality. These tasks require different computing and storage resources, while the vehicle's own computing power and battery capacity are constrained. Therefore, vehicles need to choose to offload some tasks to edge servers to be processed to save power and improve performance. However, the network connection between vehicles and edge servers is unreliable, and the resources of edge servers are also limited. These challenges make it difficult to achieve efficient task offloading and resource allocation.

We propose a vehicular network task scheduling model, consisting of **$m$ sellers** $\mathcal S=\{\mathbf s_1,\dots,\mathbf s_m\}$ and **$n$ buyers** $\mathcal B=\{\mathbf b_1,\dots,\mathbf b_n\}$.

* A **seller** is a server that can provide task offloading services, represented by a **resource vector** $\mathbf r_i=(r_{j,1},\dots,r_{j,d})$ and a cost $c_i$, where $d$ is the **total number of resource types**, $\mathbf r_{j,k}$ is the number of the **$k$-th type of resource** owned by server $\mathbf b_j$, and $c_i$ is the **unit time maintenance cost**.
* A **buyer** is a vehicle that submits a task request for offloading, represented by a task $\theta_j=(\mathbf f_j,\mathbf \sigma_j)$, where $\theta_j=(l_j,r_j,d_j,\tau_j)$ represents a task, $\mathbf f_j=(l_j,r_j,d_j,\tau_j)$ is the **task execution features**, $\mathbf \sigma_j=(\sigma_{j,1},\dots,\sigma_{j,m})$ is the **task execution server restriction vector** indicating whether task $\theta_j$ can be executed on server $\mathbf s_i$. $l_j$ is the task priority, $\mathbf r_j=(r_{j,1},\dots,r_{j,d})$ is the **task resource requirements**, $r_{j,k}$ is the task $\theta_j$'s demand for the $k$-th type of resource; $d_j$ is the task duration; $\tau_j$ is the task arrival time. $\psi_j$ is the budget of buyer $b_j$ for $\theta_j$.

At time step $t$, we use $\mathcal U_t$ to represent all the tasks submitted by vehicles at the $t$th time step, with the task sequence sorted in non-decreasing order of time. Assuming that the tasks in $\mathcal U_t$ are auctioned one by one in the order of arrival, then in this auction, the buyer is $b_j$, which represents the vehicle that initiates the task request, and the seller is $\mathcal S_j = \{\mathbf s_i | \forall \mathbf s_i \in \mathcal S, \sigma_{j,i} = 1\}$, which represents the set of servers that can satisfy the server restriction vector.

At the beginning of the auction, the buyer $\mathbf b_j$ sends the task feature $\mathbf f_j$ of $\theta_j$ to all the participating sellers $\mathcal S_j$. The sellers return bids $\mathcal Q_j = \{q_{j,i} | \forall \mathbf s_i \in \mathcal S_j\}$ based on their own status and the received task feature. $\mathcal Q_j$ represents the set of bids for $\theta_j$ from the servers, and $q_{j,i}$ represents the bid of the seller server $\mathbf s_i$ for the task $\theta_j$. The auction results are then generated, with the server allocation vector $\mathbf x_j = (x_{j,1}, \dots, x_{j,m})$ and payment $p_j = \min(q_j)$. If $x_{j,i} = 1$, it means that it is assigned to $\mathbf s_i$. If $x_{j,i} = 0$, it means that it is not assigned to $\mathbf s_i$. The buyer pays and starts task offloading. After all the tasks in $\mathcal U_t$ have been auctioned, the next time step $t + 1$ is entered. When all the time steps are completed, the auction process is over.

To describe the resource usage of task offloading, we need to model the usage of resources by tasks and servers during execution. We assume that the resource usage of task $\theta_j$ at time $t$ is a vector, where $r_{{\theta_j},k}(t)$ denotes the usage of the $k$-th resource at time $t$. $$ r_{{\theta_j},k}(t)=\begin{cases} r_{j,k}&\text{if }\tau_j \leq t < \tau_j+d_j \\ 0,&\text{otherwise} \end{cases} $$ Similarly, we assume that the available resources of seller server $\mathbf s_i$ at time $t$ is also a vector, where $r_{{\mathbf s_i},k}(t)$ denotes the remaining amount of the $k$-th resource at time $t$. We assume that task $\theta_j$ will be assigned to server $\mathbf s_i$ immediately after $\tau_j$ and will be executed within $\tau_j+d_j$ time steps. During this time, task $\theta_j$ will occupy the resources of server $k$ and will release the resources at $\tau_j+d_j$.

Therefore, we can define a service status variable $s_{i,k}(t)$ for task $\theta_j$ as follows: $$ s_{j,i}(t)=\begin{cases} 1, & \text{if } x_{j,i}=1 \text{ and } \tau_j \leq t < \tau_j+d_j\\ 0, & \text{otherwise} \end{cases} $$ where $x_{j,i}$ denotes whether task $\theta_i$ is assigned to server $\mathbf s_i$. The service status variable $s_{j,i}(t)$ denotes whether task $\theta_i$ is using the resources of server $\mathbf s_i$ at time $t$. # Based on the service status variable, we can calculate the resource usage of task $\theta_i$ on server $\mathbf s_i$ at time $t$ as follows: $$ r_{j,i}(t)=s_{j,i}(t)\cdot r_{\theta_j}(t) $$From this, we can obtain the available resources of server $\mathbf s_i$ at time $t$ as follows: $$ r_{s_i}(t)=\mathbf r_i-\sum_{i=1}^{|\mathcal U_t|} r_{j,i}(t) $$where $|\mathcal U_t|$ denotes the total number of tasks at time $t$, and $\mathbf r_i$ denotes the total resource capacity of server $\mathbf s_i$. The available resources of server $\mathbf b_j$ at time $t$, $r_i(t)$, denotes the amount of resources that server $j$ can still accept for new task offloading requests at time $t$.

The server $\mathbf b_j$ will earn a reward when it receives a task offload. Then, the total reward of edge server $\mathbf s_i$ at the end of the total time step $T$ is: $$ R_i = \sum_{t=1}^T (p_{t,i} - c_{i}) $$ Where, $p_{t,i}=\sum_{i=1}^{|\mathcal U_t|} p_{i} x_{j,i}$ is the total payment received in the $t$-th time step, $p_{j}$ is the payment of task $\theta_j$, and $c_{i}$ is the maintenance cost of the server per round.

The goal is to design a task bidding strategy for all buyers $\mathbf b$ and sellers $\mathbf s$, so that each edge server can maximize the overall revenue of the seller $R=\sum^{m}_{i=1} R_i$ under the premise of meeting the task budget and server execution constraints. Based on the above definitions, we can model the task scheduling problem in the vehicular network as an optimization problem: 
$$
\begin{aligned} &Objective: \max_{q_j} R= \sum^m_{i=1} \sum_{t=1}^T (\sum_{j=1}^{|\mathcal U_t|} p_{j} x_{j,i}- c_j)\\ &\\ &\text{s.t.}\ \ \begin{aligned} & C1:\sum_{j=1}^n x_{j,i}\sigma_{j,i} \le 1, \forall i \in \mathbf b, j \in \mathbf s \\ & C2:p_j \sum_{i=1}^m x_{j,i}\sigma_{j,i} \leq b_j, \forall i \in \mathbf b, j \in \mathbf s \\ & C3: r_{s_i}(t)\ge 0, \forall i \in \mathbf b, s_i \in \mathbf s, t \in [0, T]\\ \end{aligned} \end{aligned} 
$$ where:
* $R$ is the overall revenue of the seller
* $x_{j,i}$ is the indicator variable for whether task $\theta_j$ is assigned to edge server $\mathbf s_i$
* $\sigma_{j,i}$ is the service quality of edge server $\mathbf s_i$ for task $\theta_j$
* $p_j$ is the payment for task $\theta_j$ assigned to edge server $\mathbf s_i$
* $c_j$ is the maintenance cost of edge server $\mathbf s_i$
* $r_{s_i}(t)$ is the available resources of edge server $\mathbf s_i$ at time $t$

The constraints are as follows:
* C1: Each task can only be offloaded to one edge server in $a_j$.
* C2: The final payment for each offloaded task cannot exceed its budget $b_j$.
* C3: The available resources of each edge server at any time point $r_k(t)\ge 0$.

In the next chapter, we will introduce the task scheduling algorithm based on multi-agent reinforcement learning and reverse auction.